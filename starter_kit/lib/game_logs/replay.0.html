<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	<title>Pirates Game</title>
    <link rel="stylesheet" href="../visualizer/css/visualizer.css"/>
    <script>
        window.local_run = true;
        window.pirates_data_dir = '../visualizer/data/';
        window.replayData = '{"status": ["alive", "timeout"], "replaydata": {"lighthouses": [], "cutoff": "bot crashed", "ants": [[1, 6, 0, 4, 0, "es-", [0, 0, 0], 0], [1, 20, 0, 4, 0, "ww-", [0, 0, 0], 1], [1, 34, 0, 4, 0, "ww-", [0, 0, 0], 2], [13, 1, 0, 4, 0, "ee-", [0, 0, 0], 3], [13, 39, 0, 4, 0, "ww-", [0, 0, 0], 4], [27, 1, 0, 4, 0, "ee-", [0, 0, 0], 5], [27, 39, 0, 4, 0, "wn-", [0, 0, 0], 6], [39, 6, 0, 4, 0, "ne-", [0, 0, 0], 7], [39, 20, 0, 4, 0, "nw-", [0, 0, 0], 8], [39, 34, 0, 4, 0, "nn-", [0, 0, 0], 9], [1, 13, 0, 4, 1, "sn-", [0, 0, 0], 0], [1, 27, 0, 4, 1, "sn-", [0, 0, 0], 1], [6, 1, 0, 4, 1, "sn-", [0, 0, 0], 2], [6, 39, 0, 4, 1, "sn-", [0, 0, 0], 3], [20, 1, 0, 4, 1, "sn-", [0, 0, 0], 4], [20, 39, 0, 4, 1, "sn-", [0, 0, 0], 5], [34, 1, 0, 4, 1, "sn-", [0, 0, 0], 6], [34, 39, 0, 4, 1, "sn-", [0, 0, 0], 7], [39, 13, 0, 4, 1, "sn-", [0, 0, 0], 8], [39, 27, 0, 4, 1, "sn-", [0, 0, 0], 9]], "zones": [[], []], "hive_history": [[0], [0]], "player_seed": 42, "winning_turn": 3, "hills": [], "forts": [[13, 13, [[0, null]], [], 20, 1], [13, 27, [[0, null]], [], 20, 1], [20, 20, [[0, null]], [], 20, 1], [27, 13, [[0, null]], [], 20, 1], [27, 27, [[0, null]], [], 20, 1]], "food": [], "revision": 3, "map": {"rows": 41, "data": [".........................................", ".............b....a........b....a........", ".......a.................................", ".........................................", ".........................................", ".........................................", ".b.....................................b.", ".........................................", ".........................................", ".........................................", ".........................................", ".........................................", ".........................................", "...a.................................a...", ".........................................", ".........................................", ".........................................", ".........................................", ".........................................", ".........................................", ".b.....................................b.", ".........................................", ".........................................", ".........................................", ".........................................", ".........................................", "......................................a..", "...a.....................................", ".........................................", ".........................................", ".........................................", ".........................................", ".........................................", ".........................................", ".b.....................................b.", ".........................................", ".........................................", "..................................a......", ".......a...........a.....................", ".............b.............b.............", "........................................."], "cols": 41}, "bonus": [0, 0], "rejected": [], "turntime": 100, "scores": [[0, 0, 0, 0], [0, 0, 0, 0]], "ranking_turn": 1, "engine_seed": 42, "viewradius2": 20000, "loadtime": 10000, "turns": 1000, "attackradius2": 10, "players": 2, "maxpoints": 1000}, "challenge": "pirates", "winner_names": ["demoBot8"], "debug_messages": [[], [[1, 0, ["We have 10 pirates in our forces! \\n", "*******************************************", "Adding pirate at index 0 to this groups pirates", "\\n", "Center : (1, 13)", "Forming group structure", "Required ring for this group with 1 pirates is #0 for pivot (1, 13)", "Emitting Locations for ring #0 from pivot (1, 13)", "(1, 13) ", "Structure is: (1, 13)", "====FORMING TO====", "<Pirate ID:0 OWNER:0 LOC:(1, 13)>,(1, 13)", "==================", "*******************************************", "Adding pirate at index 1 to this groups pirates", "\\n", "Center : (1, 27)", "Forming group structure", "Required ring for this group with 1 pirates is #0 for pivot (1, 27)", "Emitting Locations for ring #0 from pivot (1, 27)", "(1, 27) ", "Structure is: (1, 27)", "====FORMING TO====", "<Pirate ID:1 OWNER:0 LOC:(1, 27)>,(1, 27)", "==================", "*******************************************", "Adding pirate at index 2 to this groups pirates", "\\n", "Center : (6, 1)", "Forming group structure", "Required ring for this group with 1 pirates is #0 for pivot (6, 1)", "Emitting Locations for ring #0 from pivot (6, 1)", "(6, 1) ", "Structure is: (6, 1)", "====FORMING TO====", "<Pirate ID:2 OWNER:0 LOC:(6, 1)>,(6, 1)", "==================", "*******************************************", "Adding pirate at index 3 to this groups pirates", "\\n", "Center : (6, 39)", "Forming group structure", "Required ring for this group with 1 pirates is #0 for pivot (6, 39)", "Emitting Locations for ring #0 from pivot (6, 39)", "(6, 39) ", "Structure is: (6, 39)", "====FORMING TO====", "<Pirate ID:3 OWNER:0 LOC:(6, 39)>,(6, 39)", "==================", "*******************************************", "Adding pirate at index 4 to this groups pirates", "\\n", "Center : (20, 1)", "Forming group structure", "Required ring for this group with 1 pirates is #0 for pivot (20, 1)", "Emitting Locations for ring #0 from pivot (20, 1)", "(20, 1) ", "Structure is: (20, 1)", "====FORMING TO====", "<Pirate ID:4 OWNER:0 LOC:(20, 1)>,(20, 1)", "==================", "*******************************************", "Adding pirate at index 5 to this groups pirates", "\\n", "Center : (20, 39)", "Forming group structure", "Required ring for this group with 1 pirates is #0 for pivot (20, 39)", "Emitting Locations for ring #0 from pivot (20, 39)", "(20, 39) ", "Structure is: (20, 39)", "====FORMING TO====", "<Pirate ID:5 OWNER:0 LOC:(20, 39)>,(20, 39)", "==================", "*******************************************", "Adding pirate at index 6 to this groups pirates", "\\n", "Center : (34, 1)", "Forming group structure", "Required ring for this group with 1 pirates is #0 for pivot (34, 1)", "Emitting Locations for ring #0 from pivot (34, 1)", "(34, 1) ", "Structure is: (34, 1)", "====FORMING TO====", "<Pirate ID:6 OWNER:0 LOC:(34, 1)>,(34, 1)", "==================", "*******************************************", "Adding pirate at index 7 to this groups pirates", "\\n", "Center : (34, 39)", "Forming group structure", "Required ring for this group with 1 pirates is #0 for pivot (34, 39)", "Emitting Locations for ring #0 from pivot (34, 39)", "(34, 39) ", "Structure is: (34, 39)", "====FORMING TO====", "<Pirate ID:7 OWNER:0 LOC:(34, 39)>,(34, 39)", "==================", "*******************************************", "Adding pirate at index 8 to this groups pirates", "\\n", "Center : (39, 13)", "Forming group structure", "Required ring for this group with 1 pirates is #0 for pivot (39, 13)", "Emitting Locations for ring #0 from pivot (39, 13)", "(39, 13) ", "Structure is: (39, 13)", "====FORMING TO====", "<Pirate ID:8 OWNER:0 LOC:(39, 13)>,(39, 13)", "==================", "*******************************************", "Adding pirate at index 9 to this groups pirates", "\\n", "Center : (39, 27)", "Forming group structure", "Required ring for this group with 1 pirates is #0 for pivot (39, 27)", "Emitting Locations for ring #0 from pivot (39, 27)", "(39, 27) ", "Structure is: (39, 27)", "====FORMING TO====", "<Pirate ID:9 OWNER:0 LOC:(39, 27)>,(39, 27)", "==================", "###############################################", "Commander timed out, switching to fallback code", "###############################################"]], [2, 0, ["Enemy veteran groups: 1,1,1,1,1,1,1,1,1,1", "Enemy new groups: ", "Total enemy config: 1,1,1,1,1,1,1,1,1,1", "Priorities Count: 5", "Priorities Count: 5", "Priorities Count: 5", "Priorities Count: 5", "Priorities Count: 5", "Priorities Count: 5", "Priorities Count: 5", "Priorities Count: 5", "Priorities Count: 5", "Priorities Count: 5", "###############################################", "Commander timed out, switching to fallback code", "###############################################"]], [3, 0, ["Enemy veteran groups: 1,1,1,1,1,1,1,1,1,1", "Enemy new groups: ", "Total enemy config: 1,1,1,1,1,1,1,1,1,1", "Priorities Count: 5", "Priorities Count: 5", "Priorities Count: 5", "Priorities Count: 5", "Priorities Count: 5", "Priorities Count: 5", "Priorities Count: 5", "Priorities Count: 5", "Priorities Count: 5", "Priorities Count: 5"]], [3, 2, ["turn    3 bot 1 timed out\\n"]]]], "rank": [0, 0], "playerturns": [3, 3], "score": [0, 0], "replayformat": "json", "location": "localhost", "game_length": 3, "game_id": 0, "playernames": ["demoBot8", "Britbot"]}';
    </script>
    <script src="../visualizer/js/Util.js"></script>
    <script src="../visualizer/js/Pirate.js"></script>
    <script src="../visualizer/js/Application.js"></script>
    <script src="../visualizer/js/Config.js"></script>
    <script src="../visualizer/js/Const.js"></script>
    <script src="../visualizer/js/Director.js"></script>
    <script src="../visualizer/js/ImageManager.js"></script>
    <script src="../visualizer/js/Replay.js"></script>

    <script src="../visualizer/js/canvas/CanvasElement.js"></script>
    <script src="../visualizer/js/canvas/CanvasElementAbstractMap.js"></script>
    <script src="../visualizer/js/canvas/CanvasElementMap.js"></script>
    <script src="../visualizer/js/canvas/CanvasElementPiratesMap.js"></script>
    <script src="../visualizer/js/canvas/CanvasElementFogPattern.js"></script>
    <script src="../visualizer/js/canvas/CanvasElementFog.js"></script>
    <script src="../visualizer/js/canvas/w.js"></script>
    <script src="../visualizer/js/canvas/CanvasElementShiftedMap.js"></script>

    <script src="../visualizer/js/lib/angular.min.js"></script>
    <script src="../visualizer/js/controls.js"></script>
</head>
<body ng-app="visualizerApp" ng-controller="VisualizerCtrl">
<div class="game">
    <div class="content">

        <div ng-if="displayLog" class="debug-info player2">
            <div ng-repeat="line in debugMessages[0][turn]" class="debug-line">
                <span class="debug-message debug-level{{line.level}}">{{line.message}}</span>
            </div>
        </div>

        <div class="canvas-wrapper" ng-class="{'smaller-canvas': displayLog}">
            <div class="toggle-log-button" ng-click="toggleLog()">
                <span ng-hide="displayLog">Open</span>
                <span ng-show="displayLog">Close</span>
                Log
            </div>
            <div id="game-canvas"></div>
        </div>

        <div ng-if="displayLog" class="debug-info player1">
            <div ng-repeat="line in debugMessages[1][turn]" class="debug-line">
                <span class="debug-message debug-level{{line.level}}">{{line.message}}</span>
            </div>
        </div>

    </div>

    <div class="bottom-bar">
        <div class="player player2">
            <div class="ship-image"><img src="../visualizer/data/img/ship_sprite.png"></div>
            <div style="clear: both;"></div>
            <div class="name">{{ visualizer.state.replay.meta['playernames'][0] }}</div>
        </div>
        <div class="controls">
            <div class="scores-bar">
                <div class="scores-line player2">
                    <div class="bar">
                        <div class="filling" ng-style="{width: (visualizer.state.replay.scores[turn][0]*100 / maxpoints) + '%'}"></div>
                    </div><!-- MUST HAVE NO SPACE
                    --><div class="score">{{ visualizer.state.replay.scores[turn][0] }}</div>
                </div>
                <div class="scores-line player1">
                    <div class="bar">
                        <div class="filling" ng-style="{width: (visualizer.state.replay.scores[turn][1]*100 / maxpoints) + '%'}"></div>
                    </div><!-- MUST HAVE NO SPACE
                    --><div class="score">{{ visualizer.state.replay.scores[turn][1] }}</div>
                </div>
            </div>
            <div>
                Turn: <span>{{ turn + 1 }}/{{ visualizer.state.replay.duration }}</span>
            </div>
            <div class="game-controls">
                <span class="ctrl-btn" ng-click="firstTurn()">
                    <img src="../visualizer/data/img/first.png" class="normal"/>
                    <img src="../visualizer/data/img/first-invert.png" class="invert"/>
                </span>
                <span class="ctrl-btn speed" ng-click="speed(-1)">
                    <img src="../visualizer/data/img/slower.png" class="normal"/>
                    <img src="../visualizer/data/img/slower-invert.png" class="invert"/>
                </span>
                <span class="ctrl-btn" ng-click="prevTurn()">
                    <img src="../visualizer/data/img/prev.png" class="normal"/>
                    <img src="../visualizer/data/img/prev-invert.png" class="invert"/>
                </span>
                <span class="ctrl-btn" ng-click="togglePlay()">
                    <img ng-hide="playing" src="../visualizer/data/img/play.png" class="normal"/>
                    <img ng-hide="playing" src="../visualizer/data/img/play-invert.png" class="invert"/>
                    <img ng-show="playing" src="../visualizer/data/img/stop.png" class="normal"/>
                    <img ng-show="playing" src="../visualizer/data/img/stop-invert.png" class="invert"/>
                </span>
                <span class="ctrl-btn" ng-click="nextTurn()">
                    <img src="../visualizer/data/img/next.png" class="normal"/>
                    <img src="../visualizer/data/img/next-invert.png" class="invert"/>
                </span>
                <span class="ctrl-btn speed" ng-click="speed(1)">
                    <img src="../visualizer/data/img/faster.png" class="normal"/>
                    <img src="../visualizer/data/img/faster-invert.png" class="invert"/>
                </span>
                <span class="ctrl-btn" ng-click="lastTurn()">
                    <img src="../visualizer/data/img/last.png" class="normal"/>
                    <img src="../visualizer/data/img/last-invert.png" class="invert"/>
                </span>
            </div>
        </div>
        <div class="player player1">
            <div class="ship-image"><img src="../visualizer/data/img/ship_sprite.png"></div>
            <div style="clear: both;"></div>
            <div class="name">{{ visualizer.state.replay.meta['playernames'][1] }}</div>
        </div>
    </div>
    <div id="replay-code" style="display: none">import json
        owner_number = 0
        def do_turn(game):
        global turns
        global owner_number
        turn = game.get_turn() - 1

        if turn == 0:
        turns = json.loads(turns)
        owner_number = 1
        pirate = game.get_pirate_on((turns[0][0], turns[0][1]))
        if not pirate:
        game.debug('------MAYBE THIS IS THE WRONG MAP?------')
        if pirate.owner == game.ME:
        owner_number = turns[0][4]
        else:
        owner_number = turns[0][4] + 1 % 2

        for pirate_data in turns:
        owner = pirate_data[4]
        spawn_turn = pirate_data[2]
        die_turn = pirate_data[3]

        if owner != owner_number or turn < spawn_turn or turn >= die_turn:
        continue

        moves = pirate_data[5]
        pirate_id = pirate_data[7]
        index = turn - spawn_turn
        if index < len(moves):
        game.set_sail(game.get_my_pirate(pirate_id), str(moves[index]))</div>
</div>
</body>
</html>
