<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Britbot: Britbot::Enemy::AnalyzeFull</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />



</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">Britbot
   
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
<script type="text/javascript" src="dynsections.js"></script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="namespaceBritbot.html">Britbot</a>      </li>
      <li class="navelem"><a class="el" href="classBritbot_1_1Enemy.html">Enemy</a>      </li>
    </ul>
  </div>
</div>
<div class="contents">
<table cellspacing="0" cellpadding="0" border="0">
  <tr>
   <td valign="top">
      <div class="navtab">
        <table>
          <tr><td class="navtab"><a class="qindex" href="classBritbot_1_1Enemy_ae95129f5b69b78072116a8939863dd4a.html#ae95129f5b69b78072116a8939863dd4a">AnalyzeEnemyGroups</a></td></tr>
          <tr><td class="navtab"><a class="qindexHL" href="classBritbot_1_1Enemy_a8881b50aeb16b6075d75e758304437b9.html#a8881b50aeb16b6075d75e758304437b9">AnalyzeFull</a></td></tr>
          <tr><td class="navtab"><a class="qindex" href="classBritbot_1_1Enemy_ad37aa5fc015413527468cc3d449ef60e.html#ad37aa5fc015413527468cc3d449ef60e">Debug</a></td></tr>
          <tr><td class="navtab"><a class="qindex" href="classBritbot_1_1Enemy_a83b7cf87df5b5358c12f0285cd24a959.html#a83b7cf87df5b5358c12f0285cd24a959">Enemy</a></td></tr>
          <tr><td class="navtab"><a class="qindex" href="classBritbot_1_1Enemy_a4b31fc6d495692194ccba8d7654cc323.html#a4b31fc6d495692194ccba8d7654cc323">EnemyIntelligenceSuspicionCounter</a></td></tr>
          <tr><td class="navtab"><a class="qindex" href="classBritbot_1_1Enemy_a598923d8196e20cc9027d8ec578a23de.html#a598923d8196e20cc9027d8ec578a23de">Groups</a></td></tr>
          <tr><td class="navtab"><a class="qindex" href="classBritbot_1_1Enemy_a8f03221fd077fcf106b6d830daefed63.html#a8f03221fd077fcf106b6d830daefed63">ShouldWeTryToCatchEnemyShips</a></td></tr>
          <tr><td class="navtab"><a class="qindex" href="classBritbot_1_1Enemy_a8e99a1aca7ad79bbc7428d05cfb6bcae.html#a8e99a1aca7ad79bbc7428d05cfb6bcae">Update</a></td></tr>
        </table>
      </div>
   </td>
   <td valign="top" class="mempage">
<a class="anchor" id="a8881b50aeb16b6075d75e758304437b9"></a><!-- doxytag: member="Britbot::Enemy::AnalyzeFull" ref="a8881b50aeb16b6075d75e758304437b9" args="(CancellationToken cancellationToken)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static List&lt;<a class="el" href="classBritbot_1_1EnemyGroup.html">EnemyGroup</a>&gt; <a class="el" href="classBritbot_1_1Enemy_a8881b50aeb16b6075d75e758304437b9.html#a8881b50aeb16b6075d75e758304437b9">Britbot.Enemy.AnalyzeFull</a> </td>
          <td>(</td>
          <td class="paramtype">CancellationToken&#160;</td>
          <td class="paramname"><em>cancellationToken</em></td><td>)</td>
          <td><code> [inline, static, private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Normal analysis of enemy groups, without considering the previous configurations Note that using this method alone will break the heading mechanism because this method technically return new groups each time (although they might be the same config) </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">cancellationToken</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>A list of enemy groups</dd></dl>

<p>Definition at line <a class="el" href="Enemy_8cs_source.html#l00135">135</a> of file <a class="el" href="Enemy_8cs_source.html">Enemy.cs</a>.</p>
<div class="fragment"><pre class="fragment">        {
            List&lt;EnemyGroup&gt; updatedGroups = <span class="keyword">new</span> List&lt;EnemyGroup&gt;();
            IEnumerable&lt;Pirate&gt; enemyAlivePirates = Bot.Game.AllEnemyPirates().Where(p =&gt; !p.IsLost);

            <span class="comment">//iterate over all the alive pirate of the enemy</span>
            <span class="keywordflow">foreach</span> (Pirate pete <span class="keywordflow">in</span> enemyAlivePirates)
            {
                <span class="comment">//Throwing an exception if cancellation was requested.</span>
                cancellationToken.ThrowIfCancellationRequested();

                <span class="comment">//create a new group and add the current pirate to it</span>
                EnemyGroup newGroup = <span class="keyword">new</span> EnemyGroup();
                newGroup.EnemyPirates.Add(pete.Id);

                <span class="comment">//check if there are any older group already containing the current pirate</span>
                List&lt;EnemyGroup&gt; containsPete = updatedGroups.Where(g =&gt; g.IsInGroup(pete.Id)).ToList();
                <span class="keywordflow">if</span> (containsPete.Count &gt; 0)
                {
                    <span class="comment">//if there are, remove these groups</span>
                    updatedGroups.RemoveAll(g =&gt; g.IsInGroup(pete.Id));

                    <span class="comment">//Add the pirates from the groups we removed to the current new group</span>
                    <span class="keywordflow">foreach</span> (EnemyGroup gr <span class="keywordflow">in</span> containsPete)
                    {
                        <span class="comment">//Throwing an exception if cancellation was requested.</span>
                        cancellationToken.ThrowIfCancellationRequested();

                        newGroup.EnemyPirates.AddRange(gr.EnemyPirates);
                    }
                }

                <span class="comment">//important, it must be here or direction cant be calculated</span>
                <span class="comment">//Set location</span>
                newGroup.PrevLoc = newGroup.GetLocation();

                <span class="comment">//add the new group to the list of groups</span>
                updatedGroups.Add(newGroup);
            }

            <span class="keywordflow">return</span> updatedGroups;
        }
</pre></div>
</div>
</div>
    </td>
  </tr>
</table>
</div><!-- contents -->


<hr class="footer"/><address class="footer"><small>
Generated on Sat Apr 25 2015 09:45:05 for Britbot by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.7.6.1
</small></address>

</body>
</html>
